<!-- Part 1 -->
<!-- Use at least one arrow function -->
<!-- There are timing issues with the event loop in a browser. Solution is ugly
        Watch video about event loop -->

<!-- create 3 buttons with textual values of Alert, Confirm, Prompt, Safer Prompt -->
<!-- use addEventListener to bind click events to the buttons and show a built-in alert  -->
<!-- confirm and prompt dialog on the window object -->

<!-- Use template strings to make this easier -->
    <!-- if confirm, echo value back webpage. Setting contents of an <output> to 
        "The value return by the confirm method is : (the value)" -->
    <!-- if not confirm, set contents of output to "User didn't enter anything" -->

<!-- In prompt example explore 
        use of unsafe collection of data 
        use of tagged template string to purify user inputs (to help guard against XSS)
            //example "The firstArg and secondArg."
            function tag(array, firstarg, secondArg) {
                let str1 = array[0] // The
                let str2 = array[1] //  and 
                let str3 = array[2] // .
                return `${array[0]}${firstArg}${array[1]}${secondArg}${array[2]} // The firstArg and secondArg.
            }
            let first = 'Firstarg'
            let second = 'Secondarg'
            tag`The ${first} and ${second}.`
            -->
    <!-- Use DOMPurify to sanitize user inputs (Can directly link to that file on CDN or install locally) -->
<!-- <script type="text/javascript" src="dist/purify.min.js"></script> -->
<!-- var clean = DOMPurify.sanitize(dirty); -->

<!-- eslint
npx eslint file.js -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DM - Native Dialogs</title>
    <script src="../node_modules/dompurify/dist/purify.min.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            let alertEl = document.getElementById('alert');
            let confirmEl = document.getElementById('confirm');
            let promptEl = document.getElementById('prompt');
            let safePromptEl = document.getElementById('safe-prompt');
            let outputEl = document.getElementById('output');

            alertEl.addEventListener('click', () => {
                window.alert('Alert button pressed');
            });

            confirmEl.addEventListener('click', () => {
                let res = window.confirm('Do you confirm this?');
                if(res){
                    outputEl.innerHTML = `The value return by the confirm method is: ${res}`;
                    console.log('in here');
                }
                else{
                    outputEl.innerHTML = 'User didn\'t enter anything';
                    console.log('in here');
                }

            });

            promptEl.addEventListener('click', () => {
                let res = window.prompt('What is your name?');
                if(res) {
                    outputEl.innerHTML = `The value return by the confirm method is: ${res}`;
                }
                else {
                    outputEl.innerHTML = 'User didn\'t enter anything';
                }
            });

            const promptTag = (strings, name) => {
                let firstStr = strings[0];
                let cleanInput = DOMPurify.sanitize(name);
                console.log(`${firstStr}${cleanInput}`);
                return `${firstStr}${cleanInput}`;
            };

            safePromptEl.addEventListener('click', () => {
                let res = window.prompt('What is your name?');
                if(res) {
                    outputEl.innerHTML = promptTag`The value return by the confirm method is: ${res}`;
                }
                else {
                    outputEl.innerHTML = 'User didn\'t enter anything';
                }
            });
        });
    </script>
</head>
<body>
    <main>
        <form>
            <input type="button" value="Alert" id="alert">
            <input type="button" value="Confirm" id="confirm">
            <input type="button" value="Prompt" id="prompt">
            <input type="button" value="Safer Prompt" id="safe-prompt">

            <output for="alert confirm prompt safe-prompt" name="result" id="output"></output>
        </form>
    </main>
</body>
</html>